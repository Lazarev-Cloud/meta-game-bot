# Телеграм-бот Belgrade Game

Телеграм-бот с множеством функций, реализующий политическую стратегическую игру, действие которой разворачивается в Белграде, Югославия, в 1998 году. Игроки соревнуются за контроль над районами города, управляют ресурсами, взаимодействуют с политиками и сталкиваются с международным влиянием.

![Версия](https://img.shields.io/badge/version-1.0.0-blue)
![Python](https://img.shields.io/badge/python-3.8%2B-green)
![Лицензия](https://img.shields.io/badge/license-MIT-orange)

## Обзор игры

Игра Belgrade Game переносит игроков в сентябрь 1998 года, где они выступают в роли политических деятелей Белграда, столицы Федеративной Республики Югославия. Город представляет собой микромир политических, социальных и экономических процессов страны.

### Основные механики игры

- **Контроль районов:** Захватывайте районы, чтобы получать ресурсы и влияние
- **Управление ресурсами:** Управляйте четырьмя типами ресурсов (Влияние, Ресурсы, Информация, Сила)
- **Политические взаимодействия:** Выстраивайте отношения с местными и международными политиками
- **Международные события:** Учитывайте влияние внешних сил на политическую ситуацию
- **Игровые циклы:** Принимайте стратегические решения в утренних и вечерних циклах
- **Многоязычная поддержка:** Игра доступна на английском и русском языках

## Скриншоты

*Скриншоты будут добавлены после развертывания*

## Установка и настройка

### Требования

- Python 3.8 или выше
- Токен Телеграм-бота от [@BotFather](https://t.me/BotFather)

### Установка

1. **Клонируйте репозиторий**

```bash
git clone https://github.com/Lazarev-Cloud/meta-game-bot.git
cd meta-game-bot
```

2. **Установите зависимости**

```bash
pip install -r requirements.txt
```

3. **Настройте бота**

- Скопируйте `config.py.example` в `config.py`
- Обновите `config.py`, указав токен бота и ID администратора

```python
# config.py
TOKEN = "ВАШ_ТОКЕН_БОТА"
ADMIN_IDS = [
    123456789,  # Замените на ваш Telegram ID
]
```

4. **Запустите бота**

```bash
python main.py
```

## Команды игры

### Основные команды

- `/start` - Начать игру и зарегистрировать персонажа
- `/help` - Показать список команд
- `/status` - Проверить ресурсы и контроль районов
- `/map` - Просмотреть карту контроля
- `/time` - Узнать текущий игровой цикл и время
- `/news` - Показать последние новости
- `/language` - Изменить язык интерфейса (английский/русский)

### Команды действий

- `/action` - Совершить основное действие (влияние, атака, защита)
- `/quick_action` - Совершить быстрое действие (разведка, распространение информации, поддержка)
- `/cancel_action` - Отменить последнее запланированное действие
- `/actions_left` - Узнать количество оставшихся действий
- `/view_district [район]` - Получить информацию о районе

### Команды ресурсов

- `/resources` - Просмотреть текущие ресурсы
- `/convert_resource [тип] [количество]` - Конвертировать ресурсы
- `/check_income` - Проверить ожидаемый доход ресурсов

### Политические команды

- `/politicians` - Список доступных политиков
- `/politician_status [имя]` - Информация о политике
- `/international` - Данные о международных политиках

### Административные команды

- `/admin_add_news [заголовок] [содержание]` - Добавить новость
- `/admin_process_cycle` - Принудительно обработать игровой цикл
- `/admin_add_resources [player_id] [resource_type] [amount]` - Добавить ресурсы игроку
- `/admin_set_control [player_id] [district_id] [control_points]` - Установить контроль над районом

## Технические детали

### Структура проекта

```
meta-game-bot/
├── bot/                  # Функциональность бота
│   ├── __init__.py
│   ├── callbacks.py      # Обработчики событий
│   └── commands.py       # Обработчики команд
├── db/                   # База данных
│   ├── __init__.py
│   ├── queries.py        # SQL-запросы
│   └── schema.py         # Схема базы данных
├── game/                 # Игровая логика
│   ├── __init__.py
│   ├── actions.py        # Действия в игре
│   ├── districts.py      # Функциональность районов
│   ├── district_utils.py # Утилиты районов
│   ├── politicians.py    # Функциональность политиков
│   └── politician_utils.py # Утилиты политиков
├── config.py             # Конфигурация
├── language_utils.py     # Утилиты для перевода
├── languages.py          # Файлы локализации
├── languages_update.py   # Дополнительные переводы
├── main.py               # Основной файл запуска
├── validators.py         # Валидаторы ввода
├── requirements.txt      # Зависимости
├── test_bot.py           # Скрипт тестирования
└── README.md             # Документация
```

### Используемые технологии

- **python-telegram-bot**: API для работы с Telegram
- **SQLite**: Легковесная база данных
- **Многоязычная поддержка**: Полная локализация на английском и русском языках

### Схема базы данных

Бот использует SQLite со следующими основными таблицами:

- `players`: Информация об игроках
- `resources`: Ресурсы игроков
- `districts`: Районы Белграда
- `district_control`: Контроль районов игроками
- `politicians`: Местные и международные политики
- `actions`: Действия игроков
- `news`: Внутриигровые новости
- `politician_relationships`: Отношения между игроками и политиками

## Основные правила игры

### Районы и контроль

- Каждый район представляет собой разные политические и социальные силы
- Для полного контроля над районом требуется 60+ очков
- При 80+ очках контроля игрок получает дополнительные бонусы
- Если район неактивен, он теряет 5 очков контроля за цикл

### Действия и ресурсы

- **Основные действия**: Влияние, Атака, Защита
- **Быстрые действия**: Разведка, Распространение информации, Поддержка
- **Ресурсы**: Влияние, Ресурсы, Информация, Сила
- Действия обновляются каждые 3 часа
- Контролируемые районы приносят ресурсы в каждом цикле

## Лицензия

Проект распространяется под лицензией MIT. Подробности см. в файле LICENSE.

